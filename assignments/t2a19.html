<!DOCTYPE html>
<html lang="en">
<head>
    <title>Encryption Example</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
</head>
<style>
  body {
    background-color: rgb(71, 62, 62);
  }
</style>
<body class="container mt-5">
    <div class="text-center">
        <h1>Encryption Example <br> Using crypto-js <br> API Description Keys <br> Ctrl + U for code</h1>
        <input type="text" id="txt" oninput="update()" value="The quick brown fox jumps over the lazy dog" class="form-control mt-3">
        <div class="mt-3">Decrypt key: <span id="key"> </span></div>
        <div class="mt-3"> <span id="action"> </span> Result: <span id="result"></span></div>
        <button onclick="encrypt()" class="btn btn-primary mt-3">Encrypt</button>
        <button onclick="decrypt()" class="btn btn-secondary mt-3">Decrypt</button>
    </div>
    <script>
             // Generate a random encryption key
             const key = CryptoJS.lib.WordArray.random(16);
             const resultsDiv = document.getElementById("result");
             const action = document.getElementById("action")
             document.getElementById("key").textContent = key;
        console.log("key: " + key.toString()); 
        var plaintext =  document.getElementById("txt").value;
        var ciphertext = CryptoJS.AES.encrypt(plaintext, key.toString());

        function update() {
  plaintext = document.getElementById("txt").value;
}

function encrypt() {
  plaintext = document.getElementById("txt").value;
  var ciphertext = CryptoJS.AES.encrypt(plaintext, key.toString());

  resultsDiv.textContent = ciphertext;
  action.textContent = 'Encrypt';
}

function decrypt() {
  // Decrypt the data using AES
  const ciphertext = resultsDiv.textContent;
  const bytes = CryptoJS.AES.decrypt(ciphertext, key.toString());
  const decrypted = bytes.toString(CryptoJS.enc.Utf8);
  resultsDiv.innerHTML = decrypted;
  action.textContent = 'Decrypt';
}
        
    </script>
</body>
</html>
