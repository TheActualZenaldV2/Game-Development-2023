<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spinning 3D Model</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Hide overflow to prevent scroll bars during loading */
        }
        canvas {
            display: block;
            cursor: grab;
        }
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .fa-spinner {
            position: fixed;
            font-size: 10em;
            color: white;
            animation: spin 1s infinite linear;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
/* Styling for the model buttons */
#model-buttons {
    position: fixed;
    top: 50%;
    height: 100%;
    width: 100%;
    text-align: center;
    z-index: 1000;
}

#prev-model {
    position: absolute;
    left: 10px; /* Adjust the left position as needed */
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 1.5em;
    cursor: pointer;
    transition: background-color 0.3s;
}

#next-model {
    position: absolute;
    right: 10px; /* Adjust the right position as needed */
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 1.5em;
    cursor: pointer;
    transition: background-color 0.3s;
}

#prev-model:hover,
#next-model:hover {
    background-color: rgba(0, 0, 0, 0.7); /* Adjust the hover background color as desired */
}
#current-model-text {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 1.5em;
  z-index: 1000;
  text-align: center; /* Center the text horizontally */
  width: auto; /* Allow the width to adjust based on content */
}
#descriptionText {
  position: fixed;
  top: 50px;
  right: 10px;
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 1.5em;
  z-index: 1000;
  text-align: center; /* Center the text horizontally */
  width: auto; /* Allow the width to adjust based on content */
  max-width: 500px;
}

#clockContainer {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
  padding: 5px 10px;
  border-radius: 5px;

    
}
#clock{
    font-size: 5.5rem;
  z-index: 1000;    font-weight: bold;
    user-select: none;
    color: rgb(59, 57, 57);

    text-shadow: 0 0 1px #FFF, 0 0 10px #FFF, 0 0 15px #FFF, 0 0 20px #525252, 0 0 30px rgb(117, 117, 117), 0 0 40px #383838, 0 0 55px #1d1d1d, 0 0 75px rgb(0, 0, 0);
    font-weight: bold;
    animation: flicker-5 3s linear infinite both;
}


@keyframes flicker-5 {
  0%,
  100% {
    opacity: 1;
  }
  0.02% {
    opacity: 1;
  }
  0% {
    opacity: 1;
  }
  1% {
    opacity: 1;
  }
  1.02% {
    opacity: 1;
  }
  8.98% {
    opacity: 1;
  }
  9% {
    opacity: 0;
  }
  9.8% {
    opacity: 0;
  }
  9.82% {
    opacity: 1;
  }
  9.48% {
    opacity: 1;
  }
  9.5% {
    opacity: 1;
  }
  9.6% {
    opacity: 1;
  }
  9.62% {
    opacity: 1;
  }
  14.98% {
    opacity: 1;
  }
  15% {
    opacity: 0.5;
  }
  15.8% {
    opacity: 0.5;
  }
  15.82% {
    opacity: 1;
  }
  15.18% {
    opacity: 1;
  }
  15.2% {
    opacity: 0.7;
  }
  16% {
    opacity: 0.7;
  }
  16.02% {
    opacity: 1;
  }
  15.48% {
    opacity: 1;
  }
  15.5% {
    opacity: 0.5;
  }
  16.2% {
    opacity: 0.5;
  }
  16.22% {
    opacity: 1;
  }
  16.98% {
    opacity: 1;
  }
  17% {
    opacity: 1;
  }
  17.8% {
    opacity: 1;
  }
  17.82% {
    opacity: 1;
  }
  20.48% {
    opacity: 1;
  }
  20.5% {
    opacity: 0.9;
  }
  21.3% {
    opacity: 0.9;
  }
  21.32% {
    opacity: 1;
  }
  20.98% {
    opacity: 1;
  }
  21% {
    opacity: 1;
  }
  22% {
    opacity: 1;
  }
  22.02% {
    opacity: 1;
  }
  39.98% {
    opacity: 1;
  }
  40% {
    opacity: 1;
  }
  41% {
    opacity: 1;
  }
  41.02% {
    opacity: 1;
  }
  40.48% {
    opacity: 1;
  }
  40.5% {
    opacity: 0.6;
  }
  41.4% {
    opacity: 0.6;
  }
  41.42% {
    opacity: 1;
  }
  41.98% {
    opacity: 1;
  }
  42% {
    opacity: 1;
  }
  42.8% {
    opacity: 1;
  }
  42.82% {
    opacity: 1;
  }
  59.98% {
    opacity: 1;
  }
  60% {
    opacity: 1;
  }
  61% {
    opacity: 1;
  }
  61.02% {
    opacity: 1;
  }
  60.18% {
    opacity: 1;
  }
  60.2% {
    opacity: 0.2;
  }
  61% {
    opacity: 0.2;
  }
  61.02% {
    opacity: 1;
  }
  60.78% {
    opacity: 1;
  }
  60.8% {
    opacity: 0.4;
  }
  61.6% {
    opacity: 0.4;
  }
  61.62% {
    opacity: 1;
  }
  61.38% {
    opacity: 1;
  }
  61.4% {
    opacity: 0;
  }
  62.2% {
    opacity: 0;
  }
  62.22% {
    opacity: 1;
  }
  61.78% {
    opacity: 1;
  }
  61.8% {
    opacity: 1;
  }
  62.8% {
    opacity: 1;
  }
  62.82% {
    opacity: 1;
  }
  75.98% {
    opacity: 1;
  }
  76% {
    opacity: 1;
  }
  77% {
    opacity: 1;
  }
  77.02% {
    opacity: 1;
  }
  77.98% {
    opacity: 1;
  }
  78% {
    opacity: 0.7;
  }
  78.8% {
    opacity: 0.7;
  }
  78.82% {
    opacity: 1;
  }
  78.98% {
    opacity: 1;
  }
  79% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  80.02% {
    opacity: 1;
  }
  99.98% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
  101% {
    opacity: 1;
  }
  101.02% {
    opacity: 1;
  }
}


    </style>
</head>
<body>
    <div id="loading-screen">
        <i class="fa fa-spinner fa-spin"></i>
    </div>
    <button id="prev-model"><i class="fas fa-arrow-left"></i> Previous </button>
<button id="next-model">Next  <i class="fas fa-arrow-right"></i></button>
<div id="current-model-text">
    <i class="fa-solid fa-earth-africa"></i>  <span id="currentModelText"> Loading...</span>

  </div>

  <div id="clockContainer"> <strong> 
    <h1 id="clock">12:00:00</h1></strong>
</div>
<strong>  <span id="descriptionText"> </span> </strong> 


    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/loaders/MTLLoader.js"></script>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/r87/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://kit.fontawesome.com/5e0a1eec4b.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

<script>
// Create a scene
const scene = new THREE.Scene();

    // Create the camera
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);


// Create an ambient light for overall scene illumination
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Adjust the color and intensity as needed
scene.add(ambientLight);

// Create a directional light (sunlight-like)
const directionalLight = new THREE.DirectionalLight(0xffffff, 2); // Adjust the color and intensity as needed
directionalLight.position.set(1, 1, 1); // Set the direction of the light
scene.add(directionalLight);






directionalLight.position.set(1, 1, 1);
directionalLight.castShadow = true; // Enable shadow casting

// Configure shadow properties
directionalLight.shadow.mapSize.width = 1024; // Shadow map width
directionalLight.shadow.mapSize.height = 1024; // Shadow map height
directionalLight.shadow.camera.near = 0.1; // Near plane of the shadow camera
directionalLight.shadow.camera.far = 10; // Far plane of the shadow camera

scene.add(directionalLight);




// Add linear fog to the scene
const starGeometry = new THREE.BufferGeometry();
const vertices = [];

for (let i = 0; i < 2000; i++) {
    const x = (Math.random() - 0.5) * 1000;  // Adjust the X position range (for stars farther away)
    const y = (Math.random() - 0.5) * 1000;  // Adjust the Y position range (for stars farther away)
    const z = (Math.random() - 0.5) * 1000;  // Adjust the Z position range (for stars farther away)

    vertices.push(x, y, z);
}


starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
const starMaterial = new THREE.PointsMaterial({
  color: 0xFFFFFF, // Adjust the color of the stars
  size: 0.05,      // Adjust the size of the stars
  transparent: true,
  opacity: 0.5,    // Adjust the opacity for the star effect
});
const starParticles = new THREE.Points(starGeometry, starMaterial);
scene.add(starParticles);




// Create a renderer
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

let gun; // Rename 'model' to 'gun'



const gltfLoader = new THREE.GLTFLoader();
let model;
let currentModel;
// Define variables for camera movement
let cameraPosition = new THREE.Vector3(0, 0, 10);
let cameraSpeed = 0.1;



// ... (your existing code here)
const modelUrls = [
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Mars_1_6792.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/Venus(surface)_1_12103.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Jupiter_1_142984.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Earth_1_12756 (1).glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Neptune_1_49528.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Triton_1_2707.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Sun_1_1391000.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Saturn_1_120536.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Moon_1_3474.glb',
    'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Callisto_1_4821.glb',
    
    
    

    
];
const planetInfo = {
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Mars_1_6792.glb': {
    name: 'Mars',
    orbitRadius: 10,
    orbitSpeed: 0.02,
    description: 'Mars: The fourth planet from the Sun, known for its reddish appearance and extensive history of robotic exploration.',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/Venus(surface)_1_12103.glb': {
    name: 'Venus',
    orbitRadius: 15,
    orbitSpeed: 0.02,
    description: 'Venus: The second planet from the Sun, often called Earths sister planet due to its similar size and composition but extreme temperatures and a thick, toxic atmosphere',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Jupiter_1_142984.glb': {
    name: 'Jupiter',
    description: 'Jupiter: The largest planet in our solar system, known for its massive size and iconic swirling cloud patterns, including the Great Red Spot',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Callisto_1_4821.glb': {
    name: 'Callisto',
    description: 'Callisto: One of Jupiters largest moons, known for its heavily cratered surface and potential interest for future exploration',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Earth_1_12756 (1).glb': {
    name: 'Earth',
    description: 'Earth: The third planet from the Sun, uniquely known for supporting life and having diverse ecosystems, including oceans, continents, and a protective atmosphere',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Moon_1_3474.glb' : {
    name : 'Moon',
    description: 'Moon: Earths natural satellite, responsible for tides and serving as a target for human space exploration',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Neptune_1_49528.glb': {
    name: 'Neptune',
    description: 'Neptune: The eighth and farthest known planet from the Sun, characterized by its striking blue color and strong winds',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Triton_1_2707.glb': {
    name: 'Triton',
    description: 'Triton: Neptunes largest moon, known for its geysers and retrograde orbit around its parent planet',
  }, 
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Sun_1_1391000.glb': {
    name: 'Sun',
    description: 'Sun: The center of our solar system, a massive ball of hot, glowing gas that provides the energy necessary for life on Earth',
  },
  'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Saturn_1_120536.glb': {
    name: 'Saturn',
    description: 'Saturn: The sixth planet from the Sun, famous for its stunning ring system made up of icy particles and rocks.',
  },
  
  
};
let currentModelIndex = 0;
const descriptionText = document.getElementById('descriptionText');

// Function to load and switch to the next model
function loadNextModel() {
    currentModelText.innerHTML = `<strong>Loading...</strong>`;
    descriptionText.innerHTML = ``;

    currentModelIndex = (currentModelIndex + 1) % modelUrls.length;
    loadModel(modelUrls[currentModelIndex]);
}

// Function to load and switch to the previous model
function loadPrevModel() {
    currentModelText.innerHTML = `<strong>Loading...</strong>`;
    currentModelIndex = (currentModelIndex - 1 + modelUrls.length) % modelUrls.length;
    loadModel(modelUrls[currentModelIndex]);
}

// Load all planet models with their respective orbit radii and speeds
const planetData = [
    { url: 'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Sun_1_1391000.glb', radius: 0, speed: 0,  },
    { url: 'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Moon_1_3474.glb', radius: 55, speed: 0.01, semiMajorAxis: 55, eccentricity: 0.02, inclination: 0, ascendingNode: 0, periapsisArg: 0, initialMeanAnomaly: 0 },
    { url: 'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/Venus(surface)_1_12103.glb', radius: 75, speed: 0.008, semiMajorAxis: 75, eccentricity: 0.01, inclination: 0, ascendingNode: 0, periapsisArg: 0, initialMeanAnomaly: 0 },
    { url: 'https://theactualzenaldv2.github.io/Game-Development-2023/assignments/daniel/Earth_1_12756 (1).glb', radius: 95, speed: 0.007, semiMajorAxis: 95, eccentricity: 0.0167, inclination: 0, ascendingNode: 0, periapsisArg: 0, initialMeanAnomaly: 0  },
    // Add data for other planets
];

for (const planetInfo of planetData) {
    loadPlanetModel(planetInfo.url, planetInfo.radius, planetInfo.speed);
}// Create a group to hold all the planets
const planetsGroup = new THREE.Group();
let loadedModelsCount = 0;
const totalModelsCount = planetData.length;

// Function to load a planet model by URL and add it to the group
function loadPlanetModel(modelUrl, orbitRadius, orbitSpeed) {
    console.log("Loading: " + modelUrl); // Log the model being loaded
    gltfLoader.load(
        modelUrl,
        (gltf) => {
            const planet = gltf.scene;
            planet.scale.set(0.01, 0.01, 0.01);

            // Position the planet on its orbit around the Sun
            const angle = Math.random() * Math.PI * 2; // Random angle for initial position
            const x = orbitRadius * Math.cos(angle);
            const z = orbitRadius * Math.sin(angle);
            planet.position.set(x, 0, z);

            // Add the planet to the group
            planetsGroup.add(planet);

            // Increment the loaded models count
            loadedModelsCount++;
            console.log("Loaded Model");

            // Check if all models are loaded
            if (loadedModelsCount === totalModelsCount) {
                console.log("All models loaded.");
                document.getElementById('loading-screen').style.display = 'none';
                // Start the animation when all models are loaded
                startAnimation();
            }
        },
        undefined,
        (error) => {
            console.error('Error loading GLB model:', error);
        }
    );
}


// Function to calculate the position of each planet in its orbit based on time
function calculatePlanetPosition(planetInfo, time) {
    const {
        semiMajorAxis,
        eccentricity,
        inclination,
        ascendingNode,
        periapsisArg,
        initialMeanAnomaly,
    } = planetInfo;

    // Calculate the mean anomaly based on time
    const meanMotion = Math.sqrt((G * sunMass) / Math.pow(semiMajorAxis, 3));
    const meanAnomaly = initialMeanAnomaly + meanMotion * time;

    // Calculate the true anomaly using Kepler's equation
    const eccentricAnomaly = calculateEccentricAnomaly(meanAnomaly, eccentricity);
    const trueAnomaly = 2 * Math.atan(Math.sqrt((1 + eccentricity) / (1 - eccentricity)) * Math.tan(eccentricAnomaly / 2));

    // Calculate the planet's position in its orbit
    const x = semiMajorAxis * (Math.cos(trueAnomaly) - eccentricity);
    const z = 0; // Assuming orbits are in the x-z plane
    const y = semiMajorAxis * Math.sin(trueAnomaly) * Math.cos(inclination);

    return { x, y, z };
}


// Animation loop
function animatePlanets(time) {
    planetData.forEach((planetInfo, index) => {
        const planet = planetsGroup.children[index];
        const { x, y, z } = calculatePlanetPosition(planetInfo, time);
        planet.position.set(x, y, z);
    });

    requestAnimationFrame(animatePlanets);
    renderer.render(scene, camera);
}


// Function to start the animation when all models are loaded
function startAnimation() {
    console.log("Starting animation...");
    // Add the group to the scene
    scene.add(planetsGroup);

    // Create an animation function to make the planets rotate
    const animatePlanets = () => {
        planetsGroup.rotation.y += 0.0001; // Rotate all planets
        requestAnimationFrame(animatePlanets);

        // Your movement code here (e.g., handleKeyboardInput)
handleKeyboardInput();
        renderer.render(scene, camera);
    };

    // Start the planets' rotation animation
    animatePlanets();
}
// Create OrbitControls
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true; // Enable smooth camera movement
controls.dampingFactor = 0.05; // Adjust the damping factor for smoother movement
controls.rotateSpeed = 0.2; // Adjust the rotation speed

// Function to handle keyboard input for camera movement
function handleKeyboardInput() {
    const speed = cameraSpeed;

    const cameraDirection = new THREE.Vector3();
    camera.getWorldDirection(cameraDirection); // Get the camera's forward direction

    const cameraRight = new THREE.Vector3();
    cameraRight.crossVectors(cameraDirection, new THREE.Vector3(0, 1, 0)); // Calculate the camera's right vector

    if (keyboardState["KeyW"]) {
        cameraPosition.addScaledVector(cameraDirection, speed); // Move forward
    }
    if (keyboardState["KeyS"]) {
        cameraPosition.addScaledVector(cameraDirection, -speed); // Move backward
    }
    if (keyboardState["KeyA"]) {
        cameraPosition.addScaledVector(cameraRight, -speed); // Move left
    }
    if (keyboardState["KeyD"]) {
        cameraPosition.addScaledVector(cameraRight, speed); // Move right
    }
    if (keyboardState["KeyE"]) {
        cameraPosition.y += speed; // Move up
    }
    if (keyboardState["KeyQ"]) {
        cameraPosition.y -= speed; // Move down
    }

    camera.position.copy(cameraPosition);
    camera.lookAt(0, 0, 0);

    // Update OrbitControls target to the current camera position
    controls.target.copy(camera.position);
}


// Add event listeners for keyboard input
const keyboardState = {};
window.addEventListener("keydown", (event) => {
    keyboardState[event.code] = true;
});

window.addEventListener("keyup", (event) => {
    keyboardState[event.code] = false;
});







// Handle button clicks
const prevModelButton = document.getElementById('prev-model');
const nextModelButton = document.getElementById('next-model');

prevModelButton.addEventListener('click', loadPrevModel);
nextModelButton.addEventListener('click', loadNextModel);

// Initial model load (you can change the index to load a different model initially)
//loadModel(modelUrls[currentModelIndex]);




// Handle window resize
window.addEventListener('resize', () => {
    const newWidth = window.innerWidth;
    const newHeight = window.innerHeight;

    camera.aspect = newWidth / newHeight;
    camera.updateProjectionMatrix();

    renderer.setSize(newWidth, newHeight);
});



const clock = document.getElementById('clock');

//clock function
function clockTime() {
  //get current time
  let date = new Date();
  let hours = date.getHours();
  let minutes = date.getMinutes();
  let seconds = date.getSeconds();
  //add 0 to minutes and seconds if less than 10
  minutes = minutes < 10 ? `0${minutes}` : minutes;
  seconds = seconds < 10 ? `0${seconds}` : seconds;
  //set time
  clock.textContent = `${hours}:${minutes}:${seconds}`;
  //call clockTime every second
  setTimeout(clockTime, 1000);
}
//call clockTime
clockTime();


    </script>
</body>
</html>
